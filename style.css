
  :root{
    --bg:#0b0f14; --card:#0f1720; --accent:#ff3b6b; --accent2:#7c5cff;
    --muted:#97a0b3; --good:#48e6a8; --bad:#ff6b6b;
    --glass: rgba(255,255,255,0.03);
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:linear-gradient(180deg,#071019 0%, #07101b 60%); color:#e6eef6;
    display:flex; align-items:center; justify-content:center; padding:28px;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }

  .app{
    width:100%; max-width:980px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
    border-radius:14px; padding:22px; box-shadow:0 10px 40px rgba(2,6,23,0.6);
    display:grid; grid-template-columns: 1fr 360px; gap:18px;
  }

  header{grid-column:1/-1; display:flex; justify-content:space-between; align-items:center; gap:12px}
  .logo{display:flex; gap:12px; align-items:center}
  .logo .icon{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800; color:white}
  h1{font-size:20px;margin:0}
  .meta{color:var(--muted); font-size:13px}

  .play-area{
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    border-radius:12px; padding:18px; min-height:420px; position:relative; overflow:hidden;
    border:1px solid rgba(255,255,255,0.03)
  }

  .level-header{display:flex; justify-content:space-between; align-items:center; gap:10px}
  .level-title{font-weight:700}
  .score-pill{background:var(--glass); padding:8px 12px;border-radius:999px; font-weight:600; color:var(--muted); font-size:13px}

  .big-input{margin-top:18px; display:flex; gap:12px; align-items:center}
  input[type="text"]{
    flex:1; padding:16px 18px; border-radius:10px; font-size:16px; background:transparent; color:inherit;
    border:1px solid rgba(255,255,255,0.04); outline:none; transition:transform .12s ease, box-shadow .12s ease;
    box-shadow: inset 0 -8px 30px rgba(0,0,0,0.6);
  }
  .btn{background:linear-gradient(90deg,var(--accent),var(--accent2)); padding:12px 14px;border-radius:10px;border:0;color:white;font-weight:700;cursor:pointer}
  .muted-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:10px 12px;border-radius:10px;color:var(--muted);cursor:pointer}
  .hint-btn{background:transparent;border:1px dashed rgba(255,255,255,0.06);padding:10px 12px;border-radius:8px;color:var(--muted);cursor:pointer}

  .rules{display:flex; flex-wrap:wrap; gap:10px; margin-top:16px}
  .rule-pill{padding:8px 12px;border-radius:999px;background:rgba(255,255,255,0.02); color:var(--muted); font-size:13px; display:flex; gap:10px; align-items:center; min-width:180px}
  .rule-pill.pass{background:linear-gradient(90deg, rgba(72,230,168,0.12), rgba(0,0,0,0.04)); color:var(--good)}
  .rule-pill.fail{background:linear-gradient(90deg, rgba(255,107,107,0.06), rgba(0,0,0,0.02)); color:var(--bad)}
  .rule-pill.hidden{filter:blur(2px); opacity:0.8; background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02))}

  .footer-right{display:flex; flex-direction:column; gap:12px}
  .sidebar{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02)); padding:16px; border-radius:12px; height:100%}
  .stat{display:flex; justify-content:space-between; margin-bottom:10px}
  small{color:var(--muted)}

  .history{margin-top:10px; max-height:260px; overflow:auto}
  .hist-row{display:flex; justify-content:space-between; padding:8px;border-radius:8px; margin-bottom:8px; background:rgba(255,255,255,0.02); font-size:13px}
  .controls{display:flex; gap:8px; margin-top:12px}

  .shake{animation:shake 450ms cubic-bezier(.36,.07,.19,.97)}
  @keyframes shake{
    10%{transform:translateX(-6px)}
    30%{transform:translateX(6px)}
    50%{transform:translateX(-3px)}
    70%{transform:translateX(3px)}
    100%{transform:translateX(0)}
  }

  .glitch{
    position:absolute; inset:0; pointer-events:none; mix-blend-mode:screen; opacity:.06;
    background-image: linear-gradient(90deg,#fff 0,#000 20%, #fff 40%, transparent 60%);
    transform-origin:left; filter:blur(4px);
    animation:glitch 1200ms steps(4) infinite;
  }
  @keyframes glitch{ 0%{transform:skewX(0) translateX(0)} 50%{transform:skewX(6deg) translateX(-10px)} 100%{transform:skewX(0) translateX(0)} }

  .confetti-canvas{position:absolute; inset:0; pointer-events:none; z-index:40}

  .drone{
    position:absolute; right:-60px; top:-30px; width:80px; height:80px; transform:rotate(15deg); opacity:0;
    transition:all .6s cubic-bezier(.2,.75,.2,1);
  }
  .drone.show{right:24px; top:-6px; opacity:1}
  .drone .body{width:80px;height:36px;border-radius:10px;background:linear-gradient(90deg,#2b2b2b,#444); display:flex;align-items:center;justify-content:center;color:white;font-weight:900}
  .drone .prop{width:12px;height:12px;border-radius:50%;background:#ddd;margin:6px}

  .hint-box{position:absolute; left:22px; bottom:22px; padding:12px 14px; background:rgba(2,4,10,0.85); border-radius:10px; min-width:240px; border:1px solid rgba(255,255,255,0.03)}
  .small{font-size:13px;color:var(--muted)}
  .kbd-swap{font-weight:700;color:var(--accent)}

  .accessibility{display:flex; gap:8px; align-items:center}
  .toggle{display:inline-flex; width:44px;height:24px;background:#111;border-radius:999px;padding:3px; align-items:center; cursor:pointer}
  .toggle .dot{width:18px;height:18px;background:#ddd;border-radius:50%; transform:translateX(0); transition:transform .18s}
  .toggle.on{background:linear-gradient(90deg,var(--accent),var(--accent2))}
  .toggle.on .dot{transform:translateX(20px); background:white}

  .timebar{height:8px;background:rgba(255,255,255,0.03); border-radius:999px; overflow:hidden;margin-top:12px}
  .time-progress{height:100%; width:100%; background:linear-gradient(90deg,var(--accent),var(--accent2)); transform-origin:left; transition:width 0.2s linear}

  footer{grid-column:1/-1; display:flex; justify-content:space-between; color:var(--muted); font-size:13px; margin-top:12px}
  @media (max-width:900px){
    .app{grid-template-columns:1fr; padding:12px}
    .sidebar{order:3}
  }